<button class="btn-outline" (click)="toggle()">
  <i class="pi pi-calendar"></i>
  {{ triggerLabel() }}
</button>

<div class="date-popup-backdrop" *ngIf="show()" (click)="close()">
  <div class="date-popup" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="close()">✕</button>

    <div class="date-popup-content">
      <div class="quick-options">
        <p (click)="filterToday()">Today</p>
        <p (click)="filterYesterday()">Yesterday</p>
        <p (click)="filterCurrentWeek()">Current week</p>
        <p (click)="filterCurrentMonth()">Current month</p>
        <p (click)="resetPeriod()">Start of account</p>
      </div>

      <div class="calendar-box">
        <div class="date-input-bar">
          <ng-container *ngIf="isSingleDate; else rangeMode">
            <span class="single-date">
              {{ selectedRange()?.[0] && formatLabel(selectedRange()![0]) }}
            </span>
          </ng-container>

          <ng-template #rangeMode>
            <span class="date-part">
              {{ selectedRange()?.[0] ? formatLabel(selectedRange()![0]) : 'Start date' }}
            </span>
            <span class="date-separator">—</span>
            <span class="date-part">
              {{ selectedRange()?.[1] ? formatLabel(selectedRange()![1]) : 'End date' }}
            </span>
          </ng-template>
        </div>

        <p-datepicker
          [ngModel]="selectedRange()"
          (ngModelChange)="selectedRange.set($event)"
          selectionMode="range"
          [inline]="true"
          [numberOfMonths]="2"
          [firstDayOfWeek]="1"
          [showOtherMonths]="false"
        ></p-datepicker>

        <div class="popup-actions">
          <button class="cancel" (click)="close()">Cancel</button>
          <button class="done" (click)="applyRange()">Done</button>
          <span class="reset-period" (click)="resetPeriod()">Reset period</span>
        </div>
      </div>
    </div>
  </div>
</div>
